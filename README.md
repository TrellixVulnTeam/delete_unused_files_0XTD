Описание
--------
Скрипт предназначен для очистки сайта от неиспользуемых файлов.

Кратенко что он делает.

- Ишет по имени файла используется ли файл в коде проекта. 
- Ищет используется  ли файл в базе. 
Поиск производится по всем таблицам и колонкам что с типом text, varchar
- Помечает файл для удаления
- Спарашивает подтверждения удаления после поиска
- Добавляет удаляемый файл в архив и производит удаление
- Выводит количество удаленных файлов, сколько места освободилось в mb, название созданного архива
- Позволяет восстановить удаленные файлы из архива

Для чего скрипт не нужно использовать
-------------------------------------
- Не используете  для очистки файлов которые используются во внешних приложениях, например php используемый вебсервером.
 Скрипт не сможет понять используется ли такой файл и пометит его для удаления.
- Не используйте если на вашем проекте есть бинарные файлы в которых могут использоватся сканируемые вами файлы. 
Скрипт не сможет понять используется ли такой файл и пометит его для удаления.  
- Не используйте для очистки кеша. Удаленный вручную кеш вероятно будет вызывать ошибки.
- Не используйте его бездумно, проверьте правильность переданных парамеров, проверьте список удаляемых файлов. 
Помните что есть вероятность что под ваш кейс скрипт неподходит.
- Помните что если у вас регулярно появлется много неиспользуемых файлов то следует наконец посмотреть код вашего сайта и понять в чем проблема.
 

Уcтановка
--------
```
sudo apt-get install gcc python-dev python-setuptools python-virtualenv
virtualenv venv
venv/bin/pip install -r requirements.txt
source venv/bin/activate
```
Очистка от неиспользуемых файлов
--------------------------------
Для пользователя требуются права select, insert, create table.

Почему нужены права insert и create_table? Для ускорения поиска использования файлов скрипт создает 
таблицу с уникальным именем где хранит простейший поисковый индекс когда заканчивает работать таблица удаляется.
Убедитись что у вас есть в запасе место на hdd примерно равное размеру бд + пару gb на всякий.
```
source venv/bin/activate
./delete_unused_files.py --db_name test --db_host localhost --db_username root --db_password pass \
--find_unused_at_directories /home/user/projects/project_name/assets/files \
--find_usages_at_directories /home/user/projects/project_name/application/ \
--find_usages_at_directories /home/user/projects/project_name/modules/ \
--find_usages_at_directories /home/user/projects/project_name/system/
```
Восстановление удаленных файлов
-------------------------------

```
source venv/bin/activate
./restore_deleted_unused_files.py /home/user/projects/project_name/deleted_unused_files_2017-03-31T15:32.tar
```
Автоматическое тестирование (Unit test)
---------------------------------------
```
source venv/bin/activate
python -m unittest discover
```

P.S. Дополнения и исправления приветствуются :)